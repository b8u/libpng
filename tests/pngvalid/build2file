import libs += libpng%lib{png} libz%lib{z}

exe{pngvalid}: {c}{pngvalid} $libs testscript
#exe{pngvalid}: test.options = --exhaustive --list-combos --log


# For cexcept.h
c.poptions =+ "-I$src_base" 

obj{*}: c.poptions =+ -DPNG_FREESTANDING_TESTS


# Disable MSVC warnings that pop up with /W3 and Clang/MSVC warnings.
#
#if ($c.class == 'msvc')
#  c.coptions += /wd4267 /wd4996
#elif ($c.id == 'clang' && $c.target.system == 'win32-msvc')
#  c.coptions += -Wno-deprecated-declarations
