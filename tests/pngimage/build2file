import libs += libpng%lib{png} libz%lib{z}

exe{pngimage}: {c}{pngimage} $libs testscript
exe{pngimage}: test.options = --exhaustive --list-combos --log

obj{*}: c.poptions =+ -DPNG_FREESTANDING_TESTS

# Disable MSVC warnings that pop up with /W3 and Clang/MSVC warnings.
#
if ($c.class == 'msvc')
  c.coptions += /wd4267 /wd4996
elif ($c.id == 'clang' && $c.target.system == 'win32-msvc')
  c.coptions += -Wno-deprecated-declarations
